---
title: "Zonal stats"
format: html
---

::::::: grid
::: {.g-col-lg-2 .g-col-md-1 .g-col-sm-0 .g-col-0}
:::

:::: {.g-col-lg-8 .g-col-md-10 .g-col-sm-12 .g-col-12}
**Name:** Zonal stats

**Keywords:** extract, summary stats, spatial aggregation

**Type:** Aggregate

**Description:** Zonal statistics aggregate spatially defined variables over some area. There are important choices to make when calculating zonal stats.

-   What function should be used to aggregate values across space (mean, median, max, min...)?

-   Should values be weighted by another spatial dataset, such as population?

-   How should edge cases be treated, where a grid cell is partially covered by the area of interest?

-   Should values be top or bottom coded first (to reduce noise)?

The best choice will often depend on your objective and the question being asked. Once these decisions are made, computing zonal stats is straightforward in R using the exactextractr package (or Python or GIS software). The code below demonstrates several different cases and can be modified to suit your requirements.

<small> **Usage:** To calculate summary statistics for a regionâ€¦

**Limitations:** The interpretation of zonal statistics depends on the aggregation method and other choices..

**Examples:** NA

**Input:** Raster data from which to extract values and vector data (polygons). Optional weighting raster.

**Ouput:** Zonal statistics for each region defined by the vector data.

</small>

**Reproducible code**

::: panel-tabset
## R

```{r}
#| echo: false
#| output: asis
if (file.exists("../code/zonal-stats.R")) {
  cat("```r
")
  try(cat(readLines("../code/zonal-stats.R"), sep = "
"))
  cat("```
")
} else {
  cat("No code
")
}
```

## Output

```{r}
#| echo: false
#| message: false
#| warning: false
if (file.exists("../code/zonal-stats.R")) {
  try(source("../code/zonal-stats.R"))
} else {
  print("None")
}
```
:::

**Last updated:** 10/16/25
::::

::: {.g-col-lg-1 .g-col-md-1 .g-col-sm-0 .g-col-0}
:::
:::::::

```{=html}
<div class="secondary-links">
  <div class="secondary-links-container">
      <div class="secondary-links-title">
      </div>
      <div class="grid">
        <div class="g-col-lg-4 g-col-md-4 g-col-sm-12">
          <ul>
            <li><a href="http://GeoPov/">Geospatial Poverty Solutions Home</a></li>
          </ul>
        </div>
        <div class="g-col-lg-4 g-col-md-4 g-col-sm-12 center-left-border">
          <ul>
            <li><a href="https://pipmaps.worldbank.org/">Geospatial poverty portal</a></li>
          </ul>
        </div>
        <div class="g-col-lg-4 g-col-md-4 g-col-sm-12 center-left-border">
          <ul>
            <li><a href="mailto:bbrunckhorst@worldbank.org?subject=GeoPov%20data%20and%20methods%20repository" target="_top">Contact us</a></li>
          </ul>
        </div>
      </div>
    </div>
</div>
```
